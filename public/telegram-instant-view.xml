<?xml version="1.0" encoding="UTF-8"?>
<rules version="2.1">
  <!-- 
    Telegram Instant View Template for 1saif.me
    Author: Saif Aljanahi
    Description: Comprehensive IV template following Telegram's best practices
    Version: 2.1
    Target: Blog articles only (/blog/* URLs)
  -->

  <!-- RULE 1.1: Only generate IV for blog posts (static article content) -->
  <!-- RULE 2: Do NOT generate for dynamic pages, main page, or service areas -->
  
  <!-- Target only blog post URLs -->
  ?path: "/blog/"
  
  <!-- Essential Properties (Rule 3.1) -->
  
  <!-- Site name - must match what users see on main page (Rule 3.2) -->
  site_name: "Saif Aljanahi"
  
  <!-- Title (Required) -->
  title: $title
  ?exists: $"meta[property='og:title']"
  title: $"meta[property='og:title']"/@content
  
  <!-- Subtitle (Rule 6.1.3) -->
  ?exists: $"meta[name='description']"
  subtitle: $"meta[name='description']"/@content
  
  <!-- Author (Rule 6.1.1) - Clear, identifiable author name -->
  author: "Saif Aljanahi"
  
  <!-- Author URL (Rule 6.3.5) -->
  author_url: "https://1saif.me"
  
  <!-- Publication date (Rule 6.1.2) - Required for news/blog -->
  ?exists: $"meta[property='article:published_time']"
  published_date: $"meta[property='article:published_time']"/@content
  
  <!-- Modified date (Optional but recommended) -->
  <modified_date>
    <meta property="article:modified_time"/>
  </modified_date>
  
  <!-- Cover Image (Rule 6.2.2) - Obligatory when present -->
  ?exists: $"meta[property='og:image']"
  cover: $"meta[property='og:image']"/@content
  
  <!-- Description for link preview (Rule 3.2) -->
  ?exists: $"meta[property='og:description']"
  description: $"meta[property='og:description']"/@content
  
  <!-- Main article content -->
  body: $body
  
  <!-- Find main article container -->
  <body>: $"article"
  
  <!-- Remove navigation elements (Rule 4) -->
  @remove: $"nav"
  @remove: $"header"
  @remove: $"footer"
  @remove: $".navigation"
  @remove: $".nav"
  @remove: $".menu"
  @remove: $".sidebar"
  @remove: $".breadcrumb"
  
  <!-- Remove advertisements and social buttons (Rule 4) -->
  @remove: $".ad"
  @remove: $".advertisement"
  @remove: $".ads"
  @remove: $".social-share"
  @remove: $".share-buttons"
  @remove: $".social-buttons"
  @remove: $"[class*='share']"
  @remove: $"[class*='social']"
  
  <!-- Remove other interface elements -->
  @remove: $".comments-section"
  @remove: $".comment-form"
  @remove: $".newsletter"
  @remove: $".subscription"
  @remove: $".widget"
  @remove: $".banner"
  @remove: $".related-posts"
  
  <!-- Preserve essential content (Rule 3.3) -->
  
  <!-- Headlines -->
  <h1>: $"h1"
  <h2>: $"h2"
  <h3>: $"h3"
  <h4>: $"h4"
  <h5>: $"h5"
  <h6>: $"h6"
  
  <!-- Paragraphs -->
  <p>: $"p"
  
  <!-- Lists -->
  <ul>: $"ul"
  <ol>: $"ol"
  <li>: $"li"
  
  <!-- Code blocks (Essential for tech blog) -->
  <pre>: $"pre"
  <code>: $"code"
  
  <!-- Images with captions (Rule 6.2.4) -->
  <figure>: $"figure"
  <img>: $"img"
  <figcaption>: $"figcaption"
  
  <!-- Quotes with proper formatting (Rule 6.5.5) -->
  <blockquote>: $"blockquote"
  <cite>: $"cite"
  
  <!-- Tables (Rule 6.4.1) - Support simple tables -->
  <table>: $"table"
  <thead>: $"thead"
  <tbody>: $"tbody"
  <tr>: $"tr"
  <th>: $"th"
  <td>: $"td"
  
  <!-- Links - preserve essential ones -->
  <a>: $"a"
  @href: $"a"/@href
  
  <!-- Text formatting -->
  <strong>: $"strong"
  <em>: $"em"
  <b>: $"b"
  <i>: $"i"
  <u>: $"u"
  <mark>: $"mark"
  
  <!-- Line breaks and dividers -->
  <br>: $"br"
  <hr>: $"hr"
  
  <!-- Image optimization (Rule 6.2.1) -->
  @src: $"img"/@src
  @alt: $"img"/@alt
  @width: $"img"/@width
  @height: $"img"/@height
  
  <!-- Related articles (Rule 6.3.2) -->
  ?exists: $".related-articles"
  <related>: $".related-articles//a"
  
  ?exists: $".related-posts"
  <related>: $".related-posts//a"
  
  <!-- Source attribution if present (Rule 6.3.4) -->
  <p>
    <small>
      "via "
      <a href="source_url">source_name</a>
    </small>
  </p>
  
  <!-- VIDEO/AUDIO HANDLING (Rule 6.4.2) -->
  <!-- Support common video platforms -->
  <video>
    <iframe[contains(@src, "youtube.com")]/@src>
    <iframe[contains(@src, "vimeo.com")]/@src>
    <iframe[contains(@src, "cloudflare")]/@src>
  </video>
  
  <!-- For unsupported video, provide link instead of unsupporting whole article -->
  <p>
    "ðŸŽ¥ Watch video: "
    <a href="video_url">video_title</a>
  </p>
  
  <!-- GALLERIES AND SLIDESHOWS (Rule 6.2.3) -->
  <!-- Convert multiple sequential images to slideshow if appropriate -->
  <slideshow>
    <img/>
    <img/>
    <img/>
    <!-- Preserve individual captions -->
    <caption/>
  </slideshow>
  
  <!-- RTL SUPPORT (Rule 3.1) -->
  <@dir="rtl" condition="html[@dir='rtl']">
  
  <!-- ANCHOR LINKS (Rule 3.3) -->
  <@id>
  <@name>
  
</rules> 