# Telegram Instant View Template for 1saif.me
# Author: Saif Aljanahi  
# Description: Blog posts only - following Telegram IV best practices
# Version: 2.1

# Set IV version to 2.1 for latest features
~version: "2.1"

# Only generate IV for blog posts (Rule 1.1 - Static article content)
# Do NOT generate for dynamic pages, main page, or service areas (Rule 2)
?path: "/blog/"

# Variables for content extraction
$article: //article[@itemScope and @itemType="https://schema.org/Article"]
$title: //h1[1]
$subtitle: //meta[@name="description"]/@content
$author: //span[@itemprop="author"]
$date: //time[@dateTime]
$cover: //img[contains(@class, "cover") or @data-cover="true"]
$body: $article

# Essential Properties (Rule 3.1)
site_name: "Saif Aljanahi"
title: $title
subtitle: $subtitle
author: $author
cover: $cover

# Process published date (Rule 6.1.2)
@datetime: $date/@dateTime
published_date: $@

# Set body content
body: $body

# Remove unnecessary elements (Rule 4)
@remove: //nav
@remove: //header
@remove: //footer
@remove: //*[contains(@class, "navigation")]
@remove: //*[contains(@class, "back-link")]
@remove: //button
@remove: //*[contains(@class, "share")]
@remove: //*[contains(@class, "social")]
@remove: //script
@remove: //style
@remove: //noscript

# Convert code blocks properly
<pre>: //pre
@set_attr(data-language, @class): //pre[starts-with(@class, "language-")]

# Handle images
@set_attr(src, @data-src): //img[@data-src]

# Simplify content according to IV format
@simplify: $body 